<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gravity Switch</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { text-align: center; font-family: Arial, sans-serif; overflow: hidden; background: #222; color: white; }
        canvas { background: linear-gradient(to bottom, #1e3c72, #2a5298); display: block; margin: auto; border: 2px solid white; }
    </style>
</head>
<body>
    <h1>Gravity Switch</h1>
    <p>Press SPACE to switch gravity</p>
    <p>Score: <span id="score">0</span></p>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 800;
        canvas.height = 400;
        
        let gravity = 1;
        let player = { x: 100, y: 200, width: 30, height: 30, dy: 0, color: "yellow" };
        let obstacles = [];
        let frame = 0;
        let isGameOver = false;
        let speed = 4;
        let score = 0;
        
        document.addEventListener("keydown", (e) => {
            if (e.code === "Space" && !isGameOver) gravity *= -1;
        });
        
        function update() {
            if (isGameOver) return;
            player.dy += gravity * 0.5;
            player.y += player.dy;
            
            if (player.y < 0 || player.y + player.height > canvas.height) {
                gameOver();
            }
            
            if (frame % 80 === 0) {
                let gapY = Math.random() * (canvas.height - 200) + 50;
                obstacles.push(
                    { x: canvas.width, y: 0, width: 30, height: gapY, color: "red" },
                    { x: canvas.width, y: gapY + 100, width: 30, height: canvas.height - (gapY + 100), color: "red" }
                );
                score++;
                document.getElementById("score").innerText = score;
            }
            
            obstacles.forEach((obstacle, index) => {
                obstacle.x -= speed;
                if (obstacle.x + obstacle.width < 0) obstacles.splice(index, 1);
                if (player.x < obstacle.x + obstacle.width && player.x + player.width > obstacle.x && 
                    player.y < obstacle.y + obstacle.height && player.y + player.height > obstacle.y) {
                    gameOver();
                }
            });
            
            frame++;
        }
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
        }
        
        function gameOver() {
            isGameOver = true;
            ctx.fillStyle = "white";
            ctx.font = "30px Arial";
            ctx.fillText("Game Over! Press F5 to restart", 200, 200);
        }
        
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        gameLoop();
    </script>
</body>
</html>
